/*
        This file is part of the OdinMS Maple Story Server
    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> 
                       Matthias Butz <matze@odinms.de>
                       Jan Christian Meyer <vimes@odinms.de>

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License version 3
    as published by the Free Software Foundation. You may not use, modify
    or distribute this program under any other version of the
    GNU Affero General Public License.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/

// John JQ Flower pile #3

function start() {
    var prizes = Array(1000000, 1000001, 1000004, 1000005, 1000007, 1000010, 1000011, 1000012, 1000013, 1000014, 1000017, 1000018, 1000019, 1000021, 1000022, 1000023, 1000024, 1000026, 1000027, 1000028, 1000029, 1000030, 1012159, 1012165, 1012166, 1012175, 1012176, 1012180, 1022102, 1032063, 1002977, 1052182, 1052193, 1052224, 1052225, 1052228, 1052230, 1052231, 1052232, 1052234, 1052236, 1052283, 1052174, 1051192, 1072388, 1072389, 1072437, 1102247, 1102244, 1702221, 1702223, 1702226, 1702237, 1702239, 1702253, 1702256, 1702257, 1702258, 1702259, 1702260, 1702261, 1702262, 1702263, 1702264, 1702265, 1702267, 1702268, 1702275, 1702276, 1102187, 1102188, 1002957, 1102257, 1702286, 1702283, 1702282, 1702281, 1702280, 1702279, 1052325, 1052326, 1052327, 1052328, 1052329, 1052330, 1052331, 1052338, 1052339, 1052340, 1052348, 1702296, 1702301, 1702302, 1102274, 1003208, 1003216, 1072484, 1072507, 1072509, 1052293, 1052294, 1000031, 1000032, 1000035, 1000041, 1000043, 1000044, 1000045, 1000046, 1000058, 1000060, 1000061, 1000062, 1000069, 1000070, 1000071, 1000072, 1000074, 1000076, 1000077, 1000079, 1000082, 1000083, 1000085, 1000086, 1001000, 1001001, 1001002, 1001003, 1001004, 1001005, 1001006, 1001008, 1001009, 1001010, 1001011, 1001012, 1001018, 1001019, 1001020, 1001021, 1001022, 1001023, 1001024, 1001025, 1001026, 1001027, 1001034, 1001036, 1001037, 1001038, 1001039, 1001040, 1001041, 1001042, 1001043, 1001044, 1001045, 1001046, 1001047, 1001048, 1001049, 1001055, 1001061, 1001063, 1001064, 1001065, 1001066, 1001068, 1001069, 1001070, 1001071, 1001075, 1001076, 1001083, 1001085, 1001087, 1001088, 1001089, 1001090, 1001091, 1001092, 1001093, 1001094, 1001095, 1001097, 1001098, 1001099, 1001100, 1001103, 1001104, 1001105, 1001106, 1001107, 1001108, 1001109, 1001110, 1002186, 1003149, 1003185, 1003161, 1003163, 1003170, 1003171, 1003182, 1003186, 1003187, 1003192, 1003193, 1003194, 1003196, 1003202, 1003203, 1003204, 1003207, 1003208, 1003210, 1003211, 1003214, 1003215, 1003216, 1003217, 1003218, 1003220, 1003221, 1003222, 1003223, 1003226, 1003232, 1003233, 1003234, 1003235, 1003237, 1003238, 1003239, 1003240, 1003241, 1003247, 1003249, 1003250, 1003251, 1003252, 1003253, 1003254, 1003255, 1003256, 1003263, 1003264, 1003265, 1003268, 1003269, 1003271, 1003272, 1003276, 1003277, 1003278, 1003279, 1003295, 1003352, 1003353, 1003354, 1003355, 1003356, 1003357, 1003358, 1003362, 1003367, 1003368, 1003376, 1003377, 1003386, 1003387, 1003390, 1003392, 1003393, 1003398, 1003399, 1003400, 1003401, 1003402, 1003403, 1003404, 1003416, 1003421, 1003422, 1003459, 1003460, 1003461, 1003462, 1003463, 1003482, 1003483, 1003484, 1003485, 1003862, 1003865, 1003867, 1003873, 1003874, 1003875, 1003876, 1003877, 1003878, 1003882, 1003883, 1003884, 1003897, 1003902, 1003903, 1003904, 1003906, 1003909, 1003912, 1003913, 1003963, 1004142, 1004143, 1004144, 1004145, 1004146, 1004147, 1004148, 1004589, 1004503, 1004806, 1005081, 1004506, 1003760, 1003776, 1003777, 1003778, 1003779, 1003792, 1003802, 1003803, 1003807, 1003808, 1003807, 1003826, 1003827, 1003829, 1003830, 1003831, 1003837, 1003836, 1003844, 1003846, 1003847, 1003855, 1003860, 1003861, 1003681, 1003683, 1003684, 1003685, 1003686, 1003683, 1003687, 1003688, 1003699, 1003700, 1003701, 1003702, 1003703, 1003704, 1003707, 1003709, 1003710, 1003711, 1003714, 1003738, 1003739, 1003742, 1003743, 1003749, 1003750, 1003759, 1003641, 1003643, 1003654, 1003655, 1003656, 1003657, 1003658, 1003667, 1004831, 1102767, 1102798, 1102789, 1102801, 1102820, 1102827, 1102835, 1102837, 1102841, 1102848, 1102870, 1102868, 1102869, 1102876, 1102884, 1102906, 1102912, 1102926, 1102957, 1102975, 1102992, 1103004, 1103007, 1103039, 1103038, 1103046, 1103067, 1103068, 1103058, 1103076, 1103077, 1103080, 1102005, 1102005, 1102020, 1102025, 1102039, 1102059, 1102060, 1102063, 1102065, 1102066, 1102067, 1102068, 1102074, 1102075, 1102076, 1102077, 1102091, 1102092, 1102093, 1102094, 1102098, 1102107, 1102108, 1102110, 1102111, 1102112, 1102137, 1102138, 1102141, 1102142, 1102144, 1102150, 1102151, 1102152, 1102153, 1102154, 1102155, 1102156, 1102157, 1102158, 1102159, 1102160, 1102164, 1102171, 1102175, 1102184, 1102185, 1102186, 1102196, 1102202, 1102204, 1102210, 1102212, 1102213, 1102214, 1102215, 1102217, 1102218, 1102222, 1102223, 1102224, 1102229, 1102230, 1102233, 1102240, 1102243, 1102245, 1102252, 1102253, 1102257, 1102258, 1102273, 1102301, 1102396, 1102419, 1102508, 1102503, 1102605, 1102604, 1102617, 1102616, 1102622, 1102625, 1102629, 1102631, 1102682, 1102699, 1102747, 1102730, 1102726, 1102725, 1102766, 1102774, 1040001, 1040005, 1040027, 1040077, 1040078, 1040101, 1040114, 1040119, 1040123, 1040124, 1040125, 1040126, 1040132, 1040129, 1040130, 1040131, 1040128, 1040127, 1040133, 1040134, 1040135, 1040137, 1040138, 1040139, 1040140, 1040141, 1040143, 1040144, 1041000, 1041009, 1041104, 1041113, 1041114, 1041125, 1041131, 1041128, 1041127, 1041132, 1041133, 1041134, 1041135, 1041136, 1041142, 1041138, 1042018, 1042019, 1042020, 1042021, 1042022, 1042025, 1042024, 1042023, 1042029, 1042030, 1042031, 1042032, 1042036, 1042035, 1042037, 1042044, 1042045, 1042046, 1042049, 1042050, 1042051, 1042052, 1042059, 1042058, 1042056, 1042055, 1042054, 1042053, 1042061, 1042062, 1042063, 1042067, 1042068, 1042072, 1042074, 1042075, 1042076, 1042077, 1042083, 1042082, 1042078, 1042085, 1042086, 1042093, 1042101, 1042103, 1042129, 1042245, 1042235, 1048001, 1042281, 1042272, 1042286, 1042287, 1042349, 1042344, 1060001, 1060066, 1060003, 1060067, 1060096, 1060103, 1060117, 1060116, 1060114, 1060113, 1060112, 1060108, 1060118, 1060119, 1060120, 1060121, 1060122, 1060123, 1060125, 1060126, 1061007, 1061067, 1061068, 1061107, 1061103, 1061112, 1061124, 1061129, 1061133, 1061138, 1061143, 1061148, 1062003, 1062005, 1062009, 1062015, 1062018, 1062027, 1062026, 1062025, 1062031, 1062032, 1062033, 1062035, 1062043, 1062038, 1062039, 1062053, 1062054, 1062055, 1062056, 1062058, 1062066, 1062068, 1062091, 1062093, 1062094, 1062098, 1062100, 1062101, 1062112, 1061207, 1080000, 1080001, 1080007, 1080008, 1080009, 1081000, 1081003, 1081004, 1081007, 1081013, 1081014, 1081015, 1082040, 1082041, 1082057, 1082058, 1082077, 1082078, 1082079, 1082101, 1082102, 1082113, 1082161, 1082162, 1082155, 1082156, 1082124, 1082169, 1082170, 1082171, 1082172, 1082173, 1082224, 1082225, 1082227, 1082231, 1082229, 1082233, 1082247, 1082249, 1082263, 1082312, 1082251, 1082255, 1082592, 1082550, 1012147, 1010003, 1012006, 1012007, 1012026, 1012024, 1012029, 1012027, 1012031, 1012057, 1012082, 1032024, 1012028, 1012055, 1032029, 1032034, 1032038, 1032051, 1032052, 1032053, 1032054, 1070066, 1071080, 1071093, 1072200, 1070003, 1071092, 1071088, 1071095, 1072466, 1022003, 1022004, 1022009, 1022011, 1022015, 1022018, 1022019, 1022020, 1022024, 1022023, 1022025, 1022026, 1022027, 1022028, 1022034, 1022040, 1022043, 1022044, 1022045, 1022047, 1022048, 1022052, 1022062, 1022061, 1022063, 1022066, 1022068, 1022069, 1022070, 1022071, 1022072, 1022084, 1022095);
    var chances = Array(10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10);
    var totalodds = 0;
    var choice = 0;
    for (var i = 0; i < chances.length; i++) {
        var itemGender = (Math.floor(prizes[i]/1000)%10);
        if (cm.getPlayer().getGender() != itemGender && itemGender != 2)
            chances[i] = 0;
    }
    for (var i = 0; i < chances.length; i++)
        totalodds += chances[i];
    var randomPick = Math.floor(Math.random()*totalodds)+1;
    for (var i = 0; i < chances.length; i++) {
        randomPick -= chances[i];
        if (randomPick <= 0) {
            choice = i;
            randomPick = totalodds + 100;
        }
    }
    if (cm.isQuestStarted(2054))
        cm.gainItem(4031028,30);
    else cm.gainItem(prizes[choice],1);
    cm.sendOk("You have gained a random #bNX#k item. Talk to me if you want more!");
    cm.dispose();
}